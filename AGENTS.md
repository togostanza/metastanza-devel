# Repository Guidelines

## Project Structure & Module Organization
- `stanzas/<name>/`: Each Stanza (component). Typical files: `index.ts`, `style.scss`, `metadata.json`, `templates/`, `assets/`. Use kebab-case for `<name>` (e.g., `scatter-plot`).
- `lib/`: Shared utilities and mixins used across Stanzas.
- `scss/` and `common.scss`: Shared styling primitives.
- `dist/`: Built artifacts generated by TogoStanza; do not edit by hand.
- `types/`: TypeScript type declarations.
- Config: `eslint.config.js`, `.prettierrc.yml`, `.stylelintrc.yml`, `tsconfig.json`, `togostanza-build.mjs`.

## Build, Test, and Development Commands
- `npx togostanza s`: Start local dev server to run and preview Stanzas.
- `npx togostanza g stanza`: Scaffold a new Stanza under `stanzas/`.
- `npm run lint`: Run all linters (ESLint, Stylelint, Prettier, editorconfig-checker).
- `npm run lint:fix`: Auto-fix lint issues where possible.
- Node 20+: ensure your environment matches `"engines": { "node": ">=20" }`.

## Coding Style & Naming Conventions
- **Languages**: TypeScript for logic (`index.ts`), SCSS for styles, optional Vue SFCs supported.
- **Indentation & format**: Prettier defaults (2 spaces). Run `npm run lint:fix` before pushing.
- **Linting**: ESLint (typescript-eslint, vue), Stylelint for `*.scss`.
- **Naming**: Stanza folders kebab-case; keep canonical filenames: `index.ts`, `style.scss`, `metadata.json`.

## Testing Guidelines
- No unit-test harness in this repo. Validate changes via `npx togostanza s` and the Stanzaâ€™s demo/README.
- Add/maintain example data and parameters under each Stanza so reviewers can reproduce.
- Prefer visual diffs: attach before/after screenshots in PRs for UI changes.

## Commit & Pull Request Guidelines
- **Commits**: Imperative, scoped. Example: `scatter-plot: fix axis tick color` or `lib: refactor Legend`.
- **Link issues**: Reference IDs (e.g., `Fixes #123`).
- **PRs must include**: concise summary, rationale, screenshots (UI), steps to verify, and a list of affected Stanzas/paths.
- **Checks**: ensure `npm run lint` passes and no files under `dist/` are edited manually.

## Security & Configuration Tips
- Sanitize any HTML/user content (DOMPurify is available).
- Keep dependencies minimal; update `package.json` and lockfiles responsibly.
